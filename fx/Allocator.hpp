// ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// Pragma.
// ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
#pragma once

// ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// Imports.
// ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
#include "Types.hpp"

// ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// Framework.
// ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
namespace fx
{
	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	// For rare case that new is just not good enough.
	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	struct Allocator
	{
		// ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
		// Virtual destructor.
		// ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
		virtual ~Allocator ( void )
		{
		}

		// ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
		// Allocate memory. Size in bytes.
		// ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
		virtual auto alloc ( const u64 _Size ) -> ptr
		{
			return new u8[_Size];
		}

		// ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
		// Free memory.
		// ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
		virtual auto free ( void* _Pointer ) -> void
		{
			delete[] reinterpret_cast<u8*>(_Pointer);
		}
	};

	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	// Default memory provider.
	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	auto AllocDef = Allocator();
}

