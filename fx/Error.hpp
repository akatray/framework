// ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// Pragma.
// ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
#pragma once

// ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// Imports.
// ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
#include "./Types.hpp"
#include <iostream>

// ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// Framework.
// ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
namespace fx
{
	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	// Error thrown by framework components.
	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	class Error
	{
		// ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
		// Members.
		// ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
		str Pk;
		str Obj;
		str Func;
		uMAX Code;
		str Desc;
		public:

		// ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
		// Trivial functions.
		// ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
		Error ( const str& _Pk, const str& _Obj, const str& _Func, const uMAX _Code, const str& _Desc = "Nothing.") : Pk(_Pk), Obj(_Obj), Func(_Func), Code(0), Desc(_Desc) {}
		auto package ( void ) const -> str { return this->Pk; }
		auto object ( void ) const -> str { return this->Obj; }
		auto function ( void ) const -> str { return this->Func; }
		auto code ( void ) const -> u64 { return this->Code; }
		auto description ( void ) const -> str { return this->Desc; }

		// ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
		// Output error report to given stream.
		// ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
		auto print ( std::ostream& _Stream = std::cout ) const -> void
		{
			_Stream << "------------------------------------------------------------\n";
			_Stream << "Error at: " << this->Pk << "::" << this->Obj << "::" << this->Func << "()\n";
			_Stream << "Code: " << this->Code << "\n";
			_Stream << "Description: " << this->Desc << "\n";
			_Stream << "------------------------------------------------------------\n";
		}
	};
}
